# Java后端热重载功能使用说明

## 功能概述

本项目已集成Spring Boot DevTools，提供以下热重载功能：
- **自动重启**：当Java类文件发生变化时自动重启应用
- **LiveReload**：支持浏览器自动刷新（需要浏览器插件）
- **属性重载**：配置文件变化时自动重载

## 配置说明

### 1. Maven依赖
已在`pom.xml`中添加：
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <scope>runtime</scope>
    <optional>true</optional>
</dependency>
```

### 2. 应用配置
已在`application.yml`中添加：
```yaml
spring:
  devtools:
    restart:
      enabled: true                    # 启用自动重启
      exclude: static/**,public/**,templates/**  # 排除静态资源
      trigger-file: .reloadtrigger     # 触发文件
    livereload:
      enabled: true                    # 启用LiveReload
      port: 35729                      # LiveReload端口
```

## 使用方法

### 1. 启动应用
```bash
# 使用Maven启动（推荐）
mvn spring-boot:run

# 或者在IDE中直接运行主类
```

### 2. 开发时的热重载
- **Java代码修改**：保存文件后应用会自动重启（通常2-3秒）
- **配置文件修改**：修改`application.yml`等配置文件后自动重载
- **静态资源**：静态文件修改不会触发重启

### 3. 手动触发重启
如需手动控制重启时机，可以：
1. 在项目根目录创建`.reloadtrigger`文件
2. 修改该文件内容来触发重启

### 4. LiveReload（可选）
要使用浏览器自动刷新功能：
1. 安装LiveReload浏览器插件
2. 在浏览器中启用插件
3. 访问应用时插件会自动连接到端口35729

## 注意事项

1. **性能影响**：DevTools仅在开发环境使用，生产环境会自动禁用
2. **重启范围**：只有classpath下的文件变化才会触发重启
3. **排除文件**：静态资源、模板文件等不会触发重启
4. **IDE支持**：
   - IntelliJ IDEA：需要启用"Build project automatically"
   - Eclipse：保存时自动编译，无需额外配置

## 故障排除

### 热重载不工作
1. 确认DevTools依赖已正确添加
2. 检查IDE是否自动编译
3. 确认修改的是Java源文件而非class文件

### 重启过于频繁
1. 检查排除配置是否正确
2. 考虑使用trigger-file模式

### LiveReload连接失败
1. 确认端口35729未被占用
2. 检查防火墙设置
3. 确认浏览器插件已正确安装和启用

## 开发建议

1. **合理使用**：对于大型项目，考虑使用JRebel等更高级的热部署工具
2. **测试验证**：重要修改后建议完全重启验证
3. **生产部署**：确保生产环境不包含DevTools依赖

---

配置完成后，重新启动应用即可享受热重载功能！