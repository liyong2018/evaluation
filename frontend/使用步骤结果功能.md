# 如何查看模型评估的步骤分组结果功能

## 📍 功能位置

**页面**: 评估计算 (Evaluation) 页面
**路径**: `http://localhost:5175/#/evaluation` (或您的前端地址)

## 🎯 使用步骤

### 步骤1: 进入评估计算页面
1. 启动前端项目（已启动在 http://localhost:5175/）
2. 在浏览器中访问评估计算页面
3. 或者点击左侧菜单的"评估计算"

### 步骤2: 配置评估参数
1. **选择权重配置**: 从下拉菜单中选择一个权重配置
2. **选择评估算法**: 从"评估算法"下拉菜单中选择一个算法（如"标准减灾能力评估算法"）
3. **选择地区**: 在地区树中勾选至少一个地区

### 步骤3: 查看所有步骤结果
1. 向下滚动到"算法步骤和公式"部分
2. 您会看到右上角有一个**绿色按钮**："查看所有步骤结果"
3. 点击这个按钮

### 步骤4: 在弹窗中查看分步结果
弹出的对话框中会显示：

#### A. 步骤选择器（顶部）
- **标题**: "选择查看步骤"
- **下拉菜单**: 显示所有步骤，例如：
  - 步骤1: 评估指标赋值
  - 步骤2: 属性向量归一化
  - 步骤3: 二级指标定权
  - 步骤4: 优劣解算法
  - 步骤5: 能力值计算与分级

#### B. 列显示控制（步骤选择器下方）
- **标题**: "列显示控制"
- **复选框组**: 显示该步骤的所有列，例如：
  - ☑ 地区代码 (不可取消)
  - ☑ 地区名称 (不可取消)
  - ☑ 队伍管理能力
  - ☑ 风险评估能力
  - ☑ 资金投入能力
  - 等等...
- **操作按钮**:
  - "全选" - 选中所有列
  - "取消全选" - 取消选中（保留必需列）
  - "重置" - 恢复默认显示

#### C. 结果表格（底部）
- 显示当前选中步骤的二维表格数据
- 只显示选中的列
- 实时响应步骤切换和列选择变化

## 🎨 界面示意

```
┌─────────────────────────────────────────────────────┐
│  算法步骤执行结果                           ✕      │
├─────────────────────────────────────────────────────┤
│                                                     │
│  选择查看步骤                                        │
│  [步骤1: 评估指标赋值 ▼]                            │
│                                                     │
│  列显示控制                                          │
│  ┌───────────────────────────────────────────┐     │
│  │ ☑ 地区代码  ☑ 地区名称  ☑ 队伍管理能力    │     │
│  │ ☑ 风险评估能力  ☑ 资金投入能力           │     │
│  └───────────────────────────────────────────┘     │
│  [全选] [取消全选] [重置]                           │
│                                                     │
│  评估指标赋值 - 计算结果                             │
│  计算基础评估指标值                                  │
│                                                     │
│  ┌─────────────────────────────────────────┐       │
│  │ 地区代码 │ 地区名称 │ 队伍管理能力 │...│       │
│  ├─────────────────────────────────────────┤       │
│  │ township... │ 青竹街道 │ 2.5 │ ... │       │
│  │ township... │ 瑞峰镇   │ 3.1 │ ... │       │
│  └─────────────────────────────────────────┘       │
│                                                     │
├─────────────────────────────────────────────────────┤
│              [关闭] [导出结果] [生成专题图]          │
└─────────────────────────────────────────────────────┘
```

## 🔍 功能验证清单

请按照以下清单验证功能是否正常显示：

- [ ] 1. 在"算法步骤和公式"部分看到"查看所有步骤结果"按钮
- [ ] 2. 点击按钮后弹出对话框
- [ ] 3. 对话框标题显示"算法步骤执行结果"
- [ ] 4. 看到"选择查看步骤"下拉菜单
- [ ] 5. 下拉菜单中列出所有算法步骤
- [ ] 6. 看到"列显示控制"区域
- [ ] 7. 列显示控制中有复选框列表
- [ ] 8. 看到"全选"、"取消全选"、"重置"三个按钮
- [ ] 9. 底部显示当前步骤的二维表格
- [ ] 10. 切换步骤时表格内容会更新
- [ ] 11. 勾选/取消列时表格列会显示/隐藏

## ❗ 如果看不到功能

### 可能的原因：

1. **前端未重新加载**
   - 解决: 在浏览器中按 `Ctrl + F5` 强制刷新页面
   
2. **缓存问题**
   - 解决: 清除浏览器缓存后重新访问

3. **算法未选择**
   - 解决: 确保已选择评估算法和地区后，按钮才会启用

4. **后端服务未启动**
   - 解决: 确保后端服务运行在 `http://localhost:8081`

5. **编译错误**
   - 解决: 虽然有TypeScript类型错误，但不影响功能运行
   - 查看控制台是否有运行时错误

## 🐛 调试方法

如果仍然看不到功能，请：

1. **打开浏览器开发者工具** (F12)
2. 切换到 **Console** 标签
3. 查找以下日志：
   - "=== 开始获取所有步骤结果 ==="
   - "获取到算法步骤:"
   - "获取到的步骤结果:"

4. 切换到 **Network** 标签
5. 点击"查看所有步骤结果"按钮
6. 查看是否有API请求发送到：
   - `/api/algorithm-step-execution/{id}/steps`
   - `/api/algorithm-step-execution/{id}/step/{order}/execute`

## 📞 需要帮助？

如果按照以上步骤仍然看不到功能，请提供：
1. 浏览器控制台的错误信息（如果有）
2. Network标签中的API请求状态
3. 您看到的实际界面截图

这样我可以帮您诊断具体问题。
